(this.webpackJsonpoxx=this.webpackJsonpoxx||[]).push([[0],{14:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(3),r=n.n(i),a=n(40),s=n.n(a),o=n(41),l=(n(48),n(49),o.a.initializeApp({apiKey:"AIzaSyB1IQgIs83X70fTM09G99JqQ3IrX36KRdg",authDomain:"burguer-queen-428af.firebaseapp.com",projectId:"burguer-queen-428af",storageBucket:"burguer-queen-428af.appspot.com",messagingSenderId:"124064613385",appId:"1:124064613385:web:96b731517426de8796e4d8"})),d=l.firestore(),u=l.auth(),j=(n(14),n(26)),b=n.p+"static/media/logobq.fe7cc1ef.png",m=n.p+"static/media/hamb.23beb518.jpg",h=n.p+"static/media/fruits.e4c7faa3.jpg",O=function(){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{className:"navbar",children:[Object(c.jsx)("img",{src:b,className:"imglogo",alt:"Logo"}),Object(c.jsx)("a",{href:"/signup",className:"signup",children:Object(c.jsx)(j.a,{to:"/signup",children:"Reg\xedstrate"})}),Object(c.jsx)("a",{href:"/signin",className:"signin",children:Object(c.jsx)(j.a,{to:"/signin",children:"Inicia sesi\xf3n"})})]}),Object(c.jsxs)("div",{className:"homeSection",children:[Object(c.jsx)("p",{className:"desayuno",children:"Desayunos"}),Object(c.jsx)("img",{className:"imgFruits",src:h,alt:"fruits"}),Object(c.jsx)("p",{className:"almuerzoYcena",children:"Almuerzos"}),Object(c.jsx)("img",{className:"imgHamb",src:m,alt:"hamb"})]})]})},f=n(9),x=n(35),p=function(e){return Object(c.jsxs)("ul",{style:g.container,className:"unorderList",onClick:function(){return e.seleccionar&&e.seleccionar(e.data)},children:[Object(c.jsx)("div",{className:"description",style:g.description,children:e.data.description}),Object(c.jsxs)("div",{className:"price",style:g.price,children:["S/. ",e.data.price]}),Object(c.jsx)("img",{src:e.data.photo,className:"photoProduct",alt:"Camera"})]})},g={container:{flex:1,flexDirection:"row",justifyContent:"flex-start"},description:{display:"inline-block"},price:{display:"inline-block"}},v=function(e){return Object(c.jsxs)("div",{className:"orderedList",onClick:function(){return e.borrar&&e.borrar(e.data)},children:[Object(c.jsx)("div",{className:"orderProduct",children:e.data.description}),Object(c.jsxs)("div",{className:"priceProduct",children:["S/. ",e.data.price.toFixed(2)]}),Object(c.jsx)("i",{className:"material-icons blue600",children:"delete_outline"})]})},N=n(13),w=n(19),y=function(e){d.collection("users").doc(e.uid).set(e).then((function(){console.log("Document successfully written!")})).catch((function(e){return console.log("error",e)}))},k=r.a.createContext(),S=function(e){var t=e.children,n=Object(i.useState)(),r=Object(f.a)(n,2),a=r[0],s=r[1];return Object(i.useEffect)((function(){u.onAuthStateChanged((function(e){console.log(e),s(e)}))}),[]),Object(c.jsx)(k.Provider,{value:a,children:t})},T=function(e){var t=Object(i.useState)([]),n=Object(f.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)([]),o=Object(f.a)(s,2),l=o[0],u=o[1],j=Object(i.useState)([]),b=Object(f.a)(j,2),m=b[0],h=b[1],O=Object(i.useState)(null),g=Object(f.a)(O,2),y=g[0],S=g[1],T=Object(i.useContext)(k),P=function(e){(function(){var e=w.a.auth().currentUser;return e?w.a.firestore().collection("users").doc(e.uid).get().then((function(e){return e.data()})).catch((function(e){return console.log("error while getting currentUser docRef",e)})):Promise.resolve(null)})().then((function(e){return S(e)}))},I=function(e){h([].concat(Object(x.a)(m),[e]))};return Object(i.useEffect)((function(){return P()}),[T]),Object(i.useEffect)((function(){return t=a,n=e.menuType,void d.collection("items").where("menu","==",n).get().then((function(e){var n=[];e.forEach((function(e){return n.push(Object(N.a)({id:e.id},e.data()))})),t(n)})).catch((function(e){console.log("Error getting documents: ",e)}));var t,n}),[e.menuType]),Object(i.useEffect)((function(){return t=u,n=e.menuType,void d.collection("items").where("category","==",n).get().then((function(e){var n=[];e.forEach((function(e){return n.push(Object(N.a)({id:e.id},e.data()))})),t(n)})).catch((function(e){console.log("Error getting documents: ",e)}));var t,n}),[e.menuType]),Object(c.jsxs)("div",{className:"Menu",style:C.container,children:[Object(c.jsx)("div",{className:"productsList",style:C.block,children:r.map((function(e,t){return Object(c.jsx)(p,{data:e,seleccionar:I},"m"+t)}))}),Object(c.jsx)("div",{className:"productsList",style:C.block,children:l.map((function(e,t){return Object(c.jsx)(p,{data:e,seleccionar:I},"c"+t)}))}),Object(c.jsxs)("div",{className:"orderList",style:C.block,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"atention",children:"Atiende:"}),y&&Object(c.jsx)("p",{className:"atentionName",children:y.name})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"atention",children:"Mesa:"}),y&&Object(c.jsx)("p",{className:"atentionName",children:y.tables[0]})]}),m.map((function(e,t){return Object(c.jsx)(v,{data:e,borrar:function(){return function(e){var t=Object(x.a)(m);t.splice(e,1),h(t)}(t)}},"o"+t)})),Object(c.jsxs)("div",{className:"totalPrice",children:[Object(c.jsx)("div",{className:"total",children:"Total"}),Object(c.jsxs)("div",{className:"amount",children:["S/. ",m.reduce((function(e,t){return e+t.price}),0).toFixed(2)]}),Object(c.jsx)("button",{className:"buttonOrder",onClick:function(){var t={items:m,time:(new Date).toLocaleString(),status:"pending",userRef:y};e.addOrder(t),function(e){for(var t={time:e.time,status:e.status,userRef:{},itemOrder:{}},n=0;n<e.items.length;n++)t.itemOrder[n.toString()]=d.doc("items/"+e.items[n].id);t.userRef=d.doc("users/"+e.userRef.uid),d.collection("order").doc().set(t)}(t),h([])},children:"Tomar pedido"})]})]})]})},C={container:{flex:1,flexDirection:"row",justifyContent:"flex-start"},block:{borderStyle:"groove"}},P=function(e){return Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:e.data.description})})},I=n(21),E=n.n(I);n(39);E.a.locale("es");var L=function(e){var t=e.orderToDeliver[e.index].items,n=e.orderToDeliver[e.index].time,i=e.orderToDeliver[e.index].user;console.log(i);return Object(c.jsxs)("div",{className:"orderKitchen",children:[Object(c.jsxs)("p",{className:"orderTime",children:["Pedido: ",Object(c.jsx)("span",{style:D.block,children:E()(n).fromNow()})]}),Object(c.jsxs)("p",{className:"orderWaiter",children:["Atendido por: ",Object(c.jsx)("span",{style:D.block,children:i.name})]}),Object(c.jsx)("div",{className:"listKitchen",children:t.map((function(e,t){return Object(c.jsx)(P,{data:e,index:t},"ik"+t)}))}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"stateButton",onClick:function(){!function(e,t){var n={status:t.status};d.collection("order").doc(e).update(n)}(e.data.id,{status:"delivered"})},children:"Servir pedido"})})]})},D={block:{color:"rgb(165, 24, 24)"}},B=function(e){return Object(c.jsx)("div",{className:"kitchen",children:e.orderToDeliver.map((function(t,n){return Object(c.jsx)(L,{data:t,index:n,orderToDeliver:e.orderToDeliver},"ok"+n)}))})},R=n(20),V=n(15),K=function(e){var t=Object(i.useState)("almuerzo y cena"),n=Object(f.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)("orderView"),o=Object(f.a)(s,2),l=o[0],u=o[1],j=Object(i.useState)([]),b=Object(f.a)(j,2),m=b[0],h=b[1];return Object(i.useEffect)((function(){return e=h,void d.collection("order").where("status","==","done").onSnapshot((function(t){var n=[],c=[];t.forEach((function(e){var t=e.data();c.push(Object(N.a)({id:e.id},e.data()));var i=Object.entries(t.itemOrder).map((function(e){return Object(f.a)(e,2)[1].get().then((function(e){return Object(N.a)({id:e.id},e.data())}))})),r=Promise.all(i),a=Promise.resolve(null);t.userRef&&(a=t.userRef.get().then((function(e){return Object(N.a)({id:e.id},e.data())})));var s=Promise.all([r,a]);n.push(s)})),Promise.all(n).then((function(t){for(var n=0;n<t.length;n++){var i=Object(f.a)(t[n],2),r=i[0],a=i[1];c[n].items=r,c[n].user=a}e(c)}))}));var e}),[]),Object(c.jsx)("div",{children:Object(c.jsxs)("section",{children:[Object(c.jsxs)("div",{className:"subheader",children:[Object(c.jsxs)("h1",{className:"filters",children:[Object(c.jsx)(R.a,{className:"icon",onClick:function(){return a("desayuno")},icon:V.b}),Object(c.jsx)(R.a,{className:"icon",onClick:function(){return a("almuerzo y cena")},icon:V.f}),Object(c.jsx)(R.a,{className:"icon",onClick:function(){return a("hamburguesas")},icon:V.d}),Object(c.jsx)(R.a,{className:"icon",onClick:function(){return a("bebidas")},icon:V.c})]}),Object(c.jsx)("h1",{className:"notifications",onClick:function(){return u("deliveredView"===l?"orderView":"deliveredView")},children:"deliveredView"===l?Object(c.jsx)("div",{children:Object(c.jsx)(R.a,{className:"icon",icon:V.a})}):Object(c.jsxs)("div",{children:[Object(c.jsx)(R.a,{className:"icon",icon:V.a})," ",Object(c.jsx)("div",{className:"quantity",children:m.length})," "]})})]}),Object(c.jsxs)("div",{children:["orderView"===l&&Object(c.jsx)(T,{menuType:r,addOrder:e.addOrder}),"deliveredView"===l&&Object(c.jsx)(B,{orderToDeliver:m})]})]})})};E.a.locale("es");var F=function(e){var t=e.orderToKitchen[e.index].items,n=e.orderToKitchen[e.index].time,i=e.orderToKitchen[e.index].user;console.log(i);return Object(c.jsxs)("div",{className:"orderKitchen",children:[Object(c.jsxs)("p",{className:"orderTime",children:["Pedido: ",Object(c.jsx)("span",{style:M.block,children:E()(n).fromNow()})]}),Object(c.jsxs)("p",{className:"orderWaiter",children:["Atendido por: ",Object(c.jsx)("span",{style:M.block,children:i.name})]}),Object(c.jsx)("div",{className:"listKitchen",children:t.map((function(e,t){return Object(c.jsx)(P,{data:e,index:t},"ik"+t)}))}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"stateButton",onClick:function(){var t={endtime:(new Date).toLocaleString(),status:"done",wait:E()(n).fromNow()};!function(e,t){var n={endtime:t.endtime,status:t.status,wait:t.wait};d.collection("order").doc(e).update(n)}(e.data.id,t)},children:"Entregar pedido"})})]})},M={block:{color:"rgb(165, 24, 24)"}},q=function(e){return Object(c.jsx)("div",{className:"kitchen",children:e.orderToKitchen.map((function(t,n){return Object(c.jsx)(F,{data:t,index:n,orderToKitchen:e.orderToKitchen},"ok"+n)}))})},A=/^[A-Za-z]\w{6,20}$/,U=function(){var e=Object(i.useState)("menuView"),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),s=Object(f.a)(a,2),o=s[0],l=s[1];return Object(i.useEffect)((function(){return e=l,void d.collection("order").where("status","==","pending").onSnapshot((function(t){var n=[],c=[];t.forEach((function(e){var t=e.data();c.push(Object(N.a)({id:e.id},e.data()));var i=Object.entries(t.itemOrder).map((function(e){return Object(f.a)(e,2)[1].get().then((function(e){return Object(N.a)({id:e.id},e.data())}))})),r=Promise.all(i),a=Promise.resolve(null);t.userRef&&(a=t.userRef.get().then((function(e){return Object(N.a)({id:e.id},e.data())})));var s=Promise.all([r,a]);n.push(s)})),Promise.all(n).then((function(t){for(var n=0;n<t.length;n++){var i=Object(f.a)(t[n],2),r=i[0],a=i[1];c[n].items=r,c[n].user=a}e(c)}))}));var e}),[]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("img",{src:b,className:"imglogo",alt:"Logo"}),Object(c.jsx)(R.a,{className:"signOutIcon",onClick:function(){u.signOut().then((function(){window.location="/"}))},icon:V.e}),Object(c.jsxs)("div",{className:"changeview",onClick:function(){return r("menuView"===n?"kitchenView":"menuView")},children:[" ","menuView"===n?"Ir a Cocina":"Ir a Menu"]})]}),"menuView"===n&&Object(c.jsx)(K,{addOrder:function(){l(o)}}),"kitchenView"===n&&Object(c.jsx)(q,{orderToKitchen:o})]})},z=n(25),W=n.p+"static/media/logo-google.55afd28a.svg",H=function(){var e=new w.a.auth.GoogleAuthProvider;return Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:W,onClick:function(){w.a.auth().signInWithPopup(e).then((function(){return u.currentUser})).then((function(e){y({uid:e.uid,mail:e.email,name:e.displayName,photo:e.photoURL})})).then((function(){window.location="/restaurant"}))},alt:"Google",class:"googleIcon"})})},G=n.p+"static/media/logobqcolor.ee4cb058.png",J=function(){var e=Object(i.useState)({email:"",password:""}),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(z.a)({},e.target.name,e.target.value))}))};return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(n),console.log(n.email,n.password),function(e,t){var n=document.getElementById("errorMessage");w.a.auth().signInWithEmailAndPassword(e,t).then((function(){window.location="/restaurant"})).catch((function(e){return n.innerHTML=e.message,n}))}(n.email,n.password)},action:"/",method:"POST",className:"signUpForm",children:[Object(c.jsx)("img",{src:G,className:"imglogoForm",alt:"Logo"}),Object(c.jsx)("label",{className:"motto",children:"Si tienes una cuenta, inicia sesi\xf3n"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{type:"text",name:"email",placeholder:"Correo electr\xf3nico",value:n.email,className:"inputButton",onChange:a,required:!0}),Object(c.jsx)("input",{type:"password",name:"password",placeholder:"Contrase\xf1a",value:n.password,onChange:a,className:"inputButton",required:!0}),Object(c.jsx)("div",{id:"errorMessage"})]}),Object(c.jsx)("button",{type:"submit",className:"signUpButton",children:"Inicia sesi\xf3n"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"motto",children:"O continuar con:"}),Object(c.jsx)(H,{})]}),Object(c.jsxs)("p",{className:"motto",children:["\xbfNo tienes una cuenta?",Object(c.jsx)("a",{href:"/signup",className:"login",style:Q.color,children:"Reg\xedstrate"})]})]})})},Q={color:{color:"#173083"}},X=function(){var e=Object(i.useState)({email:"",password:""}),t=Object(f.a)(e,2),n=t[0],r=t[1],a=function(e){r((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(z.a)({},e.target.name,e.target.value))}))};return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(n),console.log(n.email,n.password),function(e,t){var n=document.getElementById("errorMessage");t.match(A)?w.a.auth().createUserWithEmailAndPassword(e,t).then((function(){return w.a.auth().currentUser})).then((function(e){y({uid:e.uid,mail:e.email,name:e.email.match(/^([^@]*)@/)[1],photo:"../img/user-default.svg"})})).then((function(){window.location="/restaurant"})).catch((function(e){return n.innerHTML=e.message,n})):n.innerHTML="La contrase\xf1a debe tener al menos 6 caracteres, una letra y un n\xfamero"}(n.email,n.password)},action:"/",method:"POST",className:"signUpForm",children:[Object(c.jsx)("img",{src:G,className:"imglogoForm",alt:"Logo"}),Object(c.jsx)("label",{className:"motto",children:"Formulario de registro de personal"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{type:"text",name:"email",placeholder:"Correo electr\xf3nico",value:n.email,className:"inputButton",onChange:a,required:!0}),Object(c.jsx)("input",{type:"password",name:"password",placeholder:"Contrase\xf1a",value:n.password,onChange:a,className:"inputButton",required:!0}),Object(c.jsx)("div",{id:"errorMessage"})]}),Object(c.jsx)("button",{type:"submit",className:"signUpButton",children:"Reg\xedstrate"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"motto",children:"O continuar con:"}),Object(c.jsx)(H,{})]}),Object(c.jsxs)("p",{className:"motto",children:["\xbfTienes una cuenta?",Object(c.jsx)("a",{href:"/signin",className:"login",style:Y.color,children:"Inicia sesi\xf3n"})]})]})})},Y={color:{color:"#173083"}},Z=n(10),$=function(){return Object(c.jsx)(j.a,{children:Object(c.jsx)("div",{children:Object(c.jsxs)(Z.c,{children:[Object(c.jsx)(Z.a,{path:"/signin",children:Object(c.jsx)(J,{})}),Object(c.jsx)(Z.a,{path:"/signup",children:Object(c.jsx)(X,{})}),Object(c.jsx)(Z.a,{path:"/restaurant",children:Object(c.jsx)(U,{})}),Object(c.jsx)(Z.a,{path:"/",children:Object(c.jsx)(O,{})})]})})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(S,{children:Object(c.jsx)($,{})})}),document.getElementById("root")),_()}},[[59,1,2]]]);
//# sourceMappingURL=main.9336b8eb.chunk.js.map